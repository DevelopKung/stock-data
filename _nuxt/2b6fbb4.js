(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{653:function(e,t,r){"use strict";r.r(t);var n=r(263),o=r(538),c=r(551),l=r(586),d=r(657),m=r(644),f=r(550),v=r(573),h=(r(22),r(41),r(11),r(9),r(8),r(3),r(15),r(10),r(16),r(2)),_=r(5),w=(r(42),r(64)),O=r(562),j=r.n(O);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function C(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(h.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var k={pageTitle:"",toolbarMode:"hide",validate:function(e){return Object(_.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.params,e.query,r=e.store,"control-user",t.next=4,r.dispatch("menu/validateRole","control-user");case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},data:function(){return{id:this.$route.params.id,mode:"new",form:{username:"user",password:"1234",first_name:"user",last_name:"test",status:!0},loading:!1,form_valid:!0,valid:[function(e){return!!e||"กรุณากรอกข้อมูลให้ครบถ้วน"}]}},computed:{titleMode:function(){return"new"==this.mode?"สร้าง":"แก้ไข"},checkForm:function(){return!!(this.form.username&&this.form.password&&this.form.first_name&&this.form.last_name)}},methods:C(C({},Object(w.b)({loadInfo:"control-user/loadInfo",create:"control-user/create",update:"control-user/update"})),{},{getInfo:function(e){var t=this;return Object(_.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.loading=!0,r.next=3,t.loadInfo(e);case 3:1==(n=r.sent).status&&(t.form=n.payload),t.loading=!1;case 6:case"end":return r.stop()}}),r)})))()},validateData:function(form){this.checkForm&&("new"==this.mode?this.createData(form):this.updateData(form))},createData:function(form){var e=this;return Object(_.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return form.created_by=e.$auth.user._id,t.next=3,e.create(form);case 3:1==(r=t.sent).status?(j.a.fire({icon:"success",title:r.message}),e.$router.replace("/control-user")):j.a.fire({icon:"error",title:r.message});case 5:case"end":return t.stop()}}),t)})))()},updateData:function(form){var e=this;return Object(_.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return form.updated_by=e.$auth.user._id,t.next=3,e.update({id:form._id,form:form});case 3:1==(r=t.sent).status?(j.a.fire({icon:"success",title:r.message}),e.$router.replace("/control-user")):j.a.fire({icon:"error",title:r.message});case 5:case"end":return t.stop()}}),t)})))()}}),created:function(){this.id&&"new"!=this.id&&(this.getInfo(this.id),this.mode="edit")}},x=r(50),component=Object(x.a)(k,(function(){var e=this,t=e._self._c;return t("div",[t("FormActionBar",{attrs:{title:e.titleMode}},[t(n.a,{staticClass:"mr-2",attrs:{small:"",depressed:""},on:{click:function(t){return e.$router.replace("/control-user")}}},[e._v("ยกเลิก")]),e._v(" "),t(n.a,{attrs:{color:"primary",small:"",depressed:""},on:{click:function(t){return e.validateData(e.form)}}},[e._v("ตกลง")])],1),e._v(" "),t(o.a,{staticClass:"pa-4",staticStyle:{"min-height":"76vh"},attrs:{outlined:""}},[t(l.a,{ref:"form",model:{value:e.form_valid,callback:function(t){e.form_valid=t},expression:"form_valid"}},[t(f.a,{staticClass:"px-8 pt-2"},[t(c.a,{staticClass:"pt-5 pb-0",attrs:{cols:"12",sm:"4",md:"2"}},[t("h4",[e._v("ชื่อ")])]),e._v(" "),t(c.a,{staticClass:"pb-0",attrs:{cols:"12",sm:"8",md:"4"}},[t(v.a,{staticClass:"mb-2",attrs:{rules:e.valid,required:"",placeholder:"ชื่อ",outlined:"",dense:"","hide-details":""},model:{value:e.form.first_name,callback:function(t){e.$set(e.form,"first_name",t)},expression:"form.first_name"}})],1),e._v(" "),t(c.a,{staticClass:"pt-5 pb-0",attrs:{cols:"12",sm:"4",md:"2"}},[t("h4",[e._v("นามสกุล")])]),e._v(" "),t(c.a,{staticClass:"pb-0",attrs:{cols:"12",sm:"8",md:"4"}},[t(v.a,{staticClass:"mb-2",attrs:{rules:e.valid,required:"",placeholder:"นามสกุล",outlined:"",dense:"","hide-details":""},model:{value:e.form.last_name,callback:function(t){e.$set(e.form,"last_name",t)},expression:"form.last_name"}})],1),e._v(" "),t(c.a,{staticClass:"pt-5 pb-0",attrs:{cols:"12",sm:"4",md:"2"}},[t("h4",[e._v("ชื่อผู้ใช้ / username")])]),e._v(" "),t(c.a,{staticClass:"pb-0",attrs:{cols:"12",sm:"8",md:"4"}},[t(v.a,{staticClass:"mb-2",attrs:{rules:e.valid,required:"",placeholder:"ชื่อผู้ใช้ / username",outlined:"",dense:"","hide-details":""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),t(c.a,{staticClass:"pt-5 pb-0",attrs:{cols:"12",sm:"4",md:"2"}},[t("h4",[e._v("รหัสผ่าน / password")])]),e._v(" "),t(c.a,{staticClass:"pb-0",attrs:{cols:"12",sm:"8",md:"4"}},[t(v.a,{staticClass:"mb-2",attrs:{rules:e.valid,disabled:"",required:"",placeholder:"รหัสผ่าน / password",outlined:"",dense:"","hide-details":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),t(c.a,{staticClass:"pt-5 pb-0",attrs:{cols:"12",sm:"4",md:"2"}},[t("h4",[e._v("สถานะ")])]),e._v(" "),t(c.a,{attrs:{cols:"12",sm:"8",md:"4"}},[t(m.a,{staticClass:"py-0",attrs:{dense:"",row:"","hide-details":""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[t(d.a,{attrs:{label:"เปิดใช้งาน",value:!0}}),e._v(" "),t(d.a,{attrs:{label:"ปิดใช้งาน",value:!1}})],1)],1)],1)],1)],1)],1)}),[],!1,null,"ada5bf28",null);t.default=component.exports;installComponents(component,{FormActionBar:r(571).default})}}]);